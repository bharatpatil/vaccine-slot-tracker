{"version":3,"sources":["VaccineDataContext.js","Beep.js","data.ts","CityDropdown.js","DateField.js","VaccineSlots.js","App.js","index.js"],"names":["VaccineDataContext","React","createContext","getData","url","Promise","resolve","reject","fetch","then","resp","json","data","initialState","startDate","Date","toLocaleDateString","replace","cities","shouldBeep","startBipping","startMonitoring","isFetching","countdown","slots","lastChecked","pincodeToFilter","pincodeToTextField","getInitialData","JSON","parse","window","localStorage","getItem","exp","VaccineProvider","props","countDownTimerRef","useRef","useSetState","state","setState","useEffect","stopCountDown","pincodeTextField","setItem","stringify","setDataToLocalStorage","arrPincode","split","map","pincode","pc","parseInt","trim","isNaN","filter","length","clearInterval","current","alert","console","log","responses","forEach","city","checkDate","date","getStartDate","i","dateStr","apiUrl","push","setDate","getDate","all","cityCalendar","slot","sessions","session","min_age_limit","available_capacity","includes","toLocaleTimeString","setInterval","prevState","dateParts","Provider","value","children","Beep","useContext","timer","count","Audio","play","type","id","name","checked","onChange","event","target","htmlFor","CityDropdown","selectedCities","cityObj","cityName","multiple","e","Array","from","selectedOptions","option","join","style","width","val","DateField","VaccineSlots","onClick","block_name","district_name","color","vaccine","App","href","maxWidth","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.cc787126.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useRaf, useSetState, useWindowSize } from \"react-use\";\n\nexport const VaccineDataContext = React.createContext();\n\nfunction getData(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url)\n      .then((resp) => resp.json())\n      .then((data) => {\n        resolve(data);\n      });\n  });\n}\n\nexport const apiUrlTemplate = (distId, checkDate) =>\n  `https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=${distId}&date=${checkDate}`;\n\nconst initialState = {\n  startDate: new Date()\n    .toLocaleDateString(\"en-IN\")\n    .replace(\"/\", \"-\")\n    .replace(\"/\", \"-\"),\n  cities: [],\n  shouldBeep: true,\n  startBipping: false,\n  startMonitoring: false,\n  isFetching: false,\n  countdown: 0,\n  slots: [],\n  lastChecked: \"\",\n  pincodeToFilter: [],\n  pincodeToTextField: \"\",\n};\n\nconst getInitialData = () => {\n  try {\n    return {\n      ...initialState,\n      ...JSON.parse(window.localStorage.getItem(\"vti.data\")),\n      countdown: 0,\n      startBipping: false,\n    };\n  } catch (exp) {\n    return initialState;\n  }\n};\n\nconst setDataToLocalStorage = ({\n  cities,\n  shouldBeep,\n  pincodeToFilter,\n  pincodeTextField,\n}) => {\n  try {\n    window.localStorage.setItem(\n      \"vti.data\",\n      JSON.stringify({ cities, shouldBeep, pincodeToFilter, pincodeTextField })\n    );\n  } catch (exp) {\n    return initialState;\n  }\n};\n\nexport const VaccineProvider = (props) => {\n  const countDownTimerRef = React.useRef();\n\n  const [state, setState] = useSetState(getInitialData);\n\n  React.useEffect(() => {\n    return stopCountDown;\n  }, []);\n\n  React.useEffect(() => {\n    startMonitoring();\n  }, [state.startMonitoring, state.countdown]);\n\n  React.useEffect(() => {\n    setDataToLocalStorage(state);\n  }, [\n    state.cities,\n    state.shouldBeep,\n    state.pincodeToFilter,\n    state.pincodeTextField,\n  ]);\n\n  React.useEffect(() => {\n    const arrPincode = state.pincodeTextField\n      ?.split(\",\")\n      .map((pincode) => {\n        const pc = parseInt(pincode.trim());\n        if (!isNaN(pc)) {\n          return pc;\n        }\n      })\n      .filter((pc) => pc)\n      .filter((pc) => `${pc}`.length === 6); // filter undefined\n    if (arrPincode?.length > 0) {\n      setState({ pincodeToFilter: arrPincode });\n    }\n  }, [state.pincodeTextField]);\n\n  const startCountDown = () => {\n    countDownTimerRef.current = setInterval(() => {\n      setState((prevState) => ({\n        countdown: prevState.countdown - 1,\n      }));\n    }, 1000);\n  };\n\n  const stopCountDown = () => {\n    clearInterval(countDownTimerRef.current);\n  };\n\n  const startMonitoring = () => {\n    if (state.startMonitoring) {\n      if (state.cities.length === 0) {\n        alert(\"Please select city\");\n        stopCountDown();\n        setState({ startMonitoring: false });\n        return;\n      }\n\n      if (state.countdown === 0) {\n        console.log(\"starting\");\n        stopCountDown();\n        setState({ isFetching: true });\n        const responses = [];\n        state.cities.forEach((city) => {\n          const date = getStartDate();\n          for (let i = 0; i < 7; i++) {\n            const dateStr = date\n              .toLocaleDateString(\"en-IN\")\n              .replace(\"/\", \"-\")\n              .replace(\"/\", \"-\");\n            const apiUrl = apiUrlTemplate(city, dateStr);\n            responses.push(getData(apiUrl));\n            date.setDate(date.getDate() + 1);\n          }\n        });\n\n        Promise.all(responses).then((cityCalendar) => {\n          setState({\n            slots: cityCalendar\n              .map((slot) => ({\n                sessions: slot.sessions.filter(\n                  (session) =>\n                    session.min_age_limit === 18 &&\n                    session.available_capacity > 0\n                ),\n              }))\n              .map((slot) => ({\n                sessions: slot.sessions.filter((session) => {\n                  if (state.pincodeToFilter.length === 0 || !session.pincode) {\n                    return true;\n                  }\n                  if (state.pincodeToFilter.includes(session.pincode)) {\n                    return true;\n                  }\n                  return false;\n                }),\n              }))\n              .filter((slot) => slot.sessions.length > 0),\n            isFetching: false,\n            countdown: 10,\n            lastChecked: new Date().toLocaleTimeString(),\n          });\n          startCountDown();\n        });\n      }\n    } else {\n      stopCountDown();\n      setState({ countdown: 0 });\n    }\n  };\n\n  const getStartDate = () => {\n    const dateParts = state.startDate.split(\"-\");\n    return new Date(dateParts[2], dateParts[1] - 1, dateParts[0]);\n  };\n\n  return (\n    <VaccineDataContext.Provider value={{ state, setState }}>\n      {props.children}\n    </VaccineDataContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nconst beepSound = () => {\n  var snd = new Audio(\n    \"data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\"\n  );\n  snd.play();\n};\n\nexport const Beep = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n  const { slots, shouldBeep } = state;\n\n  // if slots found then trigger beep sound\n  React.useEffect(() => {\n    let timer;\n    let count = 0;\n    if (shouldBeep && slots.length > 0) {\n      timer = setInterval(() => {\n        beepSound();\n        if (++count === 5) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    }\n    return () => clearInterval(timer);\n  }, [slots, shouldBeep]);\n\n  const onChange = (event) => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n\n    setState({ shouldBeep: value });\n  };\n\n  return (\n    <p>\n      <input\n        type=\"checkbox\"\n        id=\"beep\"\n        name=\"beep\"\n        checked={state.shouldBeep}\n        onChange={onChange}\n      />\n      <label htmlFor=\"beep\">Beep on open slots</label>\n    </p>\n  );\n};\n","export const cities = [\n  { \"id\": \"622\", \"cityName\": \"Agra\" },\n  { \"id\": \"154\", \"cityName\": \"Ahmedabad\" },\n  { \"id\": \"265\", \"cityName\": \"Bangalore Urban\" },\n  { \"id\": \"571\", \"cityName\": \"Chennai\" },\n  { \"id\": \"140\", \"cityName\": \"Delhi, New\" },\n  { \"id\": \"149\", \"cityName\": \"Delhi, South\" },\n  { \"id\": \"145\", \"cityName\": \"Delhi, East\" },\n  { \"id\": \"142\", \"cityName\": \"Delhi, West\" },\n  { \"id\": \"146\", \"cityName\": \"Delhi, North\" },\n  { \"id\": \"307\", \"cityName\": \"Ernakulam, Kerala\" },\n  { \"id\": \"651\", \"cityName\": \"Gaziabad\" },\n  { \"id\": \"581\", \"cityName\": \"Hyderabad\" },\n  { \"id\": \"544\", \"cityName\": \"Kanyakumari\" },\n  { \"id\": \"725\", \"cityName\": \"Kolkotta\" },\n  { \"id\": \"596\", \"cityName\": \"Medchal, Telangana\" },\n  { \"id\": \"395\", \"cityName\": \"Mumbai\" },\n  { \"id\": \"266\", \"cityName\": \"Mysore\" },\n  { \"id\": \"650\", \"cityName\": \"Noida\" },\n  { \"id\": \"308\", \"cityName\": \"Palakkad, Kerala\" },\n  { \"id\": \"363\", \"cityName\": \"Pune\" },\n  { \"id\": \"173\", \"cityName\": \"Rajkot, Gujarat\" },\n  { \"id\": \"775\", \"cityName\": \"Rajkot Corporation, Gujarat\" },\n  { \"id\": \"603\", \"cityName\": \"Ranga Reddy, Telangana\" },\n  { \"id\": \"296\", \"cityName\": \"Thiruvananthapuram, Kerala\" },\n  { \"id\": \"167\", \"cityName\": \"Valsad, Gujarat\" }\n];\n","import React from \"react\";\nimport { cities } from \"./data\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nexport const CityDropdown = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const onSelectChange = (e) => {\n    let value = Array.from(e.target.selectedOptions, (option) => option.value);\n    setState({ cities: value });\n  };\n\n  const onPincodeChange = (e) => {\n    let val = e.target.value.trim();\n\n    if (val.length > 0) {\n      setState({ pincodeTextField: val });\n    }\n  };\n\n  const selectedCities = cities\n    .filter((cityObj) => state.cities.includes(cityObj.id))\n    .map((cityObj) => cityObj.cityName);\n\n  return (\n    <div>\n      <select\n        name=\"city\"\n        id=\"city\"\n        multiple\n        value={state.cities}\n        onChange={onSelectChange}\n      >\n        {cities.map(({ id, cityName }) => (\n          <option key={id} value={id}>\n            {cityName}\n          </option>\n        ))}\n      </select>\n      <p>\n        Selected {selectedCities.length > 1 ? \"Cities\" : \"City\"}:{\" \"}\n        {selectedCities.join(\" | \")}\n      </p>\n      <p>\n        Specific Pincodes (e.g. 411033,411001):{\" \"}\n        <input\n          style={{width: 400}}\n          type=\"text\"\n          value={state.pincodeTextField}\n          onChange={onPincodeChange}\n        />\n      </p>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nexport const DateField = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const onDateChange = (e) => {\n    setState({ startDate: e.target.value });\n  };\n\n  return (\n    <input\n      type=\"text\"\n      id=\"date\"\n      name=\"date\"\n      value={state.startDate}\n      onChange={onDateChange}\n      style={{ width: 80 }}\n    />\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nexport const VaccineSlots = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const { slots, startMonitoring, isFetching, countdown, lastChecked } = state;\n\n  const onStartMonitoring = () => {\n    setState({ startMonitoring: !startMonitoring });\n  };\n\n  return (\n    <div>\n      <button type=\"button\" onClick={onStartMonitoring}>\n        <span>{startMonitoring ? \"Stop\" : \"Start Monitoring\"}</span>\n      </button>\n\n      {isFetching ? (\n        <p>'Checking slots...'</p>\n      ) : startMonitoring ? (\n        <p>\n          {lastChecked && (\n            <span>\n              Last checked at {lastChecked} <br />\n            </span>\n          )}\n          Checking again in: {countdown} seconds\n        </p>\n      ) : (\n        <p></p>\n      )}\n\n      {slots.length > 0 ? (\n        <ul>\n          {slots.map((slot, i) => {\n            return slot?.sessions.map((session, i) => {\n              return (\n                <li key={i}>\n                  {session.date} {session.name}, {session.block_name},{\" \"}\n                  {session.district_name}, {session.pincode},{\" \"}\n                  <span style={{ color: \"#00cc00\" }}>{session.vaccine}</span> -{\" \"}\n                  <span style={{ color: \"#ff0080\" }}>\n                    {session.available_capacity} slots\n                  </span>{\" \"}\n                  <span>(Age limit {session.min_age_limit})</span>\n                </li>\n              );\n            });\n          })}\n        </ul>\n      ) : (\n        <p>\n          <b>No open slots are available.</b>\n        </p>\n      )}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Beep } from \"./Beep\";\nimport { CityDropdown } from \"./CityDropdown\";\nimport { DateField } from \"./DateField\";\nimport \"./styles.css\";\nimport { VaccineProvider } from \"./VaccineDataContext\";\nimport { VaccineSlots } from \"./VaccineSlots\";\n\nexport default function App() {\n  return (\n    <VaccineProvider>\n      <div>\n        <p>\n          Inspired by{\" \"}\n          <a target=\"_blank\" href=\"https://pranavmehta.github.io/1844vaccine/\">\n            https://pranavmehta.github.io/1844vaccine/\n          </a>\n          <br />\n          <sub>This is re-written in reactjs just for fun ♥️</sub>\n        </p>\n        <h1>Cowin open slot alert for 18-44 age group</h1>\n        <p style={{ maxWidth: 600 }}>\n          This bot periodically checks the Cowin portal for available\n          vaccination slots for the 18-44 age group every 60 seconds and alerts\n          with an audible beep if an open slot is found.\n        </p>\n         <p>To use this bot,</p>\n        <ul>\n          <li>select one or more cities,</li>\n          <li>click \"Start monitoring\"</li>\n          <li>keep it running in a browser tab</li>\n        </ul>\n        <p>\n          Start date: <DateField /> (dd-mm-yyyy, checks for upto 7 days from\n          this date)\n        </p>\n        <CityDropdown />\n        <Beep />\n        <VaccineSlots />\n      </div>\n    </VaccineProvider>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}