{"version":3,"sources":["VaccineDataContext.js","Beep.js","data.ts","CityDropdown.js","DateField.js","VaccineSlots.js","App.js","index.js"],"names":["VaccineDataContext","React","createContext","getData","url","Promise","resolve","reject","fetch","then","resp","json","data","error","initialState","startDate","Date","toLocaleDateString","replace","cities","shouldBeep","startBipping","startMonitoring","isFetching","countdown","slots","groupedSlots","lastChecked","pincodeToFilter","pincodeTextField","isError","age18","age45","getInitialData","JSON","parse","window","localStorage","getItem","exp","VaccineProvider","props","countDownTimerRef","useRef","useSetState","state","setState","useEffect","stopCountDown","setItem","stringify","setDataToLocalStorage","arrPincode","split","map","pincode","pc","parseInt","trim","isNaN","filter","length","getSlotByPincodeGroup","startCountDown","current","setInterval","prevState","clearInterval","alert","responses","forEach","city","checkDate","date","getStartDate","i","dateStr","apiUrl","push","setDate","getDate","all","cityCalendar","slotsWithoutPinCodeFilter","slot","sessions","arr","reduce","val","acc","CHECK_SLOTS_EVERY_SECONDS","toLocaleTimeString","groupBy","session","min_age_limit","available_capacity","includes","dateParts","Provider","value","children","Beep","useContext","others","timer","count","Audio","play","type","id","name","checked","onChange","event","target","htmlFor","CityDropdown","onInputChange","selectedCities","cityObj","cityName","multiple","e","Array","from","selectedOptions","option","style","color","join","width","marginLeft","DateField","SlotsUi","block_name","district_name","vaccine","VaccineSlots","onClick","App","href","maxWidth","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.c0a6eb00.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useRaf, useSetState, useWindowSize } from \"react-use\";\nimport groupBy from \"lodash/groupBy\";\n\nexport const CHECK_SLOTS_EVERY_SECONDS = 60;\n\nexport const VaccineDataContext = React.createContext();\n\nfunction getData(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url)\n      .then((resp) => resp.json())\n      .then(\n        (data) => resolve(data),\n        (error) => reject(error)\n      );\n  });\n}\n\nexport const apiUrlTemplate = (distId, checkDate) =>\n  `https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=${distId}&date=${checkDate}`;\n\nconst initialState = {\n  startDate: new Date()\n    .toLocaleDateString(\"en-IN\")\n    .replace(\"/\", \"-\")\n    .replace(\"/\", \"-\"),\n  cities: [],\n  shouldBeep: true,\n  startBipping: false,\n  startMonitoring: false,\n  isFetching: false,\n  countdown: 0,\n  slots: [],\n  groupedSlots: {},\n  lastChecked: \"\",\n  pincodeToFilter: [],\n  pincodeTextField: \"\",\n  isError: false,\n  age18: true,\n  age45: false,\n};\n\nconst getInitialData = () => {\n  try {\n    return {\n      ...initialState,\n      ...JSON.parse(window.localStorage.getItem(\"vti.data\")),\n      countdown: 0,\n      startBipping: false,\n    };\n  } catch (exp) {\n    return initialState;\n  }\n};\n\nconst setDataToLocalStorage = ({\n  cities,\n  shouldBeep,\n  pincodeToFilter,\n  pincodeTextField,\n  age18,\n  age45,\n}) => {\n  try {\n    window.localStorage.setItem(\n      \"vti.data\",\n      JSON.stringify({\n        cities,\n        shouldBeep,\n        pincodeToFilter,\n        pincodeTextField,\n        age18,\n        age45,\n      })\n    );\n  } catch (exp) {\n    return initialState;\n  }\n};\n\nexport const VaccineProvider = (props) => {\n  const countDownTimerRef = React.useRef();\n\n  const [state, setState] = useSetState(getInitialData);\n\n  React.useEffect(() => {\n    return stopCountDown;\n  }, []);\n\n  React.useEffect(() => {\n    startMonitoring();\n  }, [state.startMonitoring, state.countdown]);\n\n  React.useEffect(() => {\n    setDataToLocalStorage(state);\n  }, [\n    state.cities,\n    state.shouldBeep,\n    state.pincodeToFilter,\n    state.pincodeTextField,\n    state.age18,\n    state.age45,\n  ]);\n\n  React.useEffect(() => {\n    const arrPincode = state.pincodeTextField\n      ?.split(\",\")\n      .map((pincode) => {\n        const pc = parseInt(pincode.trim());\n        if (!isNaN(pc)) {\n          return pc;\n        }\n      })\n      .filter((pc) => pc) // filter undefined\n      .filter((pc) => `${pc}`.length === 6); // pincode length is 6\n    setState({ pincodeToFilter: arrPincode });\n  }, [state.pincodeTextField]);\n\n  // generate grouped slots\n  React.useEffect(() => {\n    getSlotByPincodeGroup();\n  }, [state.slots, state.pincodeToFilter, state.age18, state.age45]);\n\n  const startCountDown = () => {\n    countDownTimerRef.current = setInterval(() => {\n      setState((prevState) => ({\n        countdown: prevState.countdown - 1,\n      }));\n    }, 1000);\n  };\n\n  const stopCountDown = () => {\n    clearInterval(countDownTimerRef.current);\n  };\n\n  const startMonitoring = () => {\n    if (state.startMonitoring) {\n      if (state.cities.length === 0) {\n        alert(\"Please select city\");\n        stopCountDown();\n        setState({ startMonitoring: false });\n        return;\n      }\n\n      if (state.countdown === 0) {\n        stopCountDown();\n        setState({ isFetching: true });\n        const responses = [];\n        state.cities.forEach((city) => {\n          const date = getStartDate();\n          for (let i = 0; i < 7; i++) {\n            const dateStr = date\n              .toLocaleDateString(\"en-IN\")\n              .replace(\"/\", \"-\")\n              .replace(\"/\", \"-\");\n            const apiUrl = apiUrlTemplate(city, dateStr);\n            responses.push(getData(apiUrl));\n            date.setDate(date.getDate() + 1);\n          }\n        });\n\n        Promise.all(responses).then(\n          (cityCalendar) => {\n            const slotsWithoutPinCodeFilter = cityCalendar\n              .map((slot) => slot.sessions)\n              .filter((arr) => arr.length > 0)\n              .reduce((val, acc) => (acc = [...acc, ...val]), []);\n\n            setState({\n              slots: slotsWithoutPinCodeFilter,\n              isFetching: false,\n              countdown:\n                window.CHECK_SLOTS_EVERY_SECONDS || CHECK_SLOTS_EVERY_SECONDS,\n              lastChecked: new Date().toLocaleTimeString(),\n              isError: false,\n            });\n            startCountDown();\n          },\n          () => {\n            setState({\n              slots: [],\n              isFetching: false,\n              countdown:\n                window.CHECK_SLOTS_EVERY_SECONDS || CHECK_SLOTS_EVERY_SECONDS,\n              lastChecked: new Date().toLocaleTimeString(),\n              isError: true,\n            });\n            startCountDown();\n          }\n        );\n      }\n    } else {\n      stopCountDown();\n      setState({ countdown: 0 });\n    }\n  };\n\n  const getSlotByPincodeGroup = () => {\n    const groupedSlots = groupBy(\n      state.slots.filter(\n        (session) =>\n          ((state.age18 && session.min_age_limit === 18) ||\n            (state.age45 && session.min_age_limit === 45)) &&\n          session.available_capacity > 0\n      ),\n      (session) => {\n        if (state.pincodeToFilter.length === 0 || !session.pincode) {\n          return \"others\";\n        }\n        if (state.pincodeToFilter.includes(session.pincode)) {\n          return \"pincode\";\n        }\n        return \"others\";\n      }\n    );\n\n    setState({ groupedSlots });\n  };\n\n  const getStartDate = () => {\n    const dateParts = state.startDate.split(\"-\");\n    return new Date(dateParts[2], dateParts[1] - 1, dateParts[0]);\n  };\n\n  return (\n    <VaccineDataContext.Provider value={{ state, setState }}>\n      {props.children}\n    </VaccineDataContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nconst beepSound = () => {\n  var snd = new Audio(\n    \"data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\"\n  );\n  snd.play();\n};\n\nexport const Beep = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n  const {\n    groupedSlots: { others, pincode },\n    shouldBeep,\n  } = state;\n\n  // if slots found then trigger beep sound\n  React.useEffect(() => {\n    let timer;\n    let count = 0;\n    if (\n      shouldBeep &&\n      ((pincode && pincode.length > 0) || (others && others.length > 0))\n    ) {\n      timer = setInterval(() => {\n        beepSound();\n        if (++count === 5) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    }\n    return () => clearInterval(timer);\n  }, [others, pincode, shouldBeep]);\n\n  const onChange = (event) => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n\n    setState({ shouldBeep: value });\n  };\n\n  return (\n    <p>\n      <input\n        type=\"checkbox\"\n        id=\"beep\"\n        name=\"beep\"\n        checked={state.shouldBeep}\n        onChange={onChange}\n      />\n      <label htmlFor=\"beep\">Beep on open slots</label>\n    </p>\n  );\n};\n","export const cities = [\n  { \"id\": \"622\", \"cityName\": \"Agra\" },\n  { \"id\": \"154\", \"cityName\": \"Ahmedabad\" },\n  { \"id\": \"265\", \"cityName\": \"Bangalore Urban\" },\n  { \"id\": \"571\", \"cityName\": \"Chennai\" },\n  { \"id\": \"140\", \"cityName\": \"Delhi, New\" },\n  { \"id\": \"149\", \"cityName\": \"Delhi, South\" },\n  { \"id\": \"145\", \"cityName\": \"Delhi, East\" },\n  { \"id\": \"142\", \"cityName\": \"Delhi, West\" },\n  { \"id\": \"146\", \"cityName\": \"Delhi, North\" },\n  { \"id\": \"307\", \"cityName\": \"Ernakulam, Kerala\" },\n  { \"id\": \"651\", \"cityName\": \"Gaziabad\" },\n  { \"id\": \"581\", \"cityName\": \"Hyderabad\" },\n  { \"id\": \"544\", \"cityName\": \"Kanyakumari\" },\n  { \"id\": \"725\", \"cityName\": \"Kolkotta\" },\n  { \"id\": \"596\", \"cityName\": \"Medchal, Telangana\" },\n  { \"id\": \"395\", \"cityName\": \"Mumbai\" },\n  { \"id\": \"266\", \"cityName\": \"Mysore\" },\n  { \"id\": \"650\", \"cityName\": \"Noida\" },\n  { \"id\": \"308\", \"cityName\": \"Palakkad, Kerala\" },\n  { \"id\": \"363\", \"cityName\": \"Pune\" },\n  { \"id\": \"173\", \"cityName\": \"Rajkot, Gujarat\" },\n  { \"id\": \"775\", \"cityName\": \"Rajkot Corporation, Gujarat\" },\n  { \"id\": \"603\", \"cityName\": \"Ranga Reddy, Telangana\" },\n  { \"id\": \"296\", \"cityName\": \"Thiruvananthapuram, Kerala\" },\n  { \"id\": \"167\", \"cityName\": \"Valsad, Gujarat\" }\n];\n","import React from \"react\";\nimport { cities } from \"./data\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nexport const CityDropdown = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const onSelectChange = (e) => {\n    let value = Array.from(e.target.selectedOptions, (option) => option.value);\n    setState({ cities: value });\n  };\n\n  const onPincodeChange = (e) => {\n    let val = e.target.value.trim();\n\n    setState({ pincodeTextField: val });\n  };\n\n  const onInputChange = (event) => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    setState({\n      [name]: value,\n    });\n  };\n\n  const selectedCities = cities\n    .filter((cityObj) => state.cities.includes(cityObj.id))\n    .map((cityObj) => cityObj.cityName);\n\n  return (\n    <div>\n      <select\n        name=\"city\"\n        id=\"city\"\n        multiple\n        value={state.cities}\n        onChange={onSelectChange}\n      >\n        {cities.map(({ id, cityName }) => (\n          <option key={id} value={id}>\n            {cityName}\n          </option>\n        ))}\n      </select>\n      <p>\n        <span style={{ color: \"#ff0080\" }}>\n          Selected {selectedCities.length > 1 ? \"Cities\" : \"City\"}:{\" \"}\n        </span>\n        {selectedCities.join(\" | \")}\n      </p>\n      <p>\n        Specific Pincodes (e.g. 411033,411001):{\" \"}\n        <input\n          style={{ width: 700 }}\n          type=\"text\"\n          value={state.pincodeTextField}\n          onChange={onPincodeChange}\n        />\n        <br />\n        <br />\n        <label>\n          <input\n            name=\"age18\"\n            type=\"checkbox\"\n            checked={state.age18}\n            onChange={onInputChange}\n          />{\" \"}\n          Age 18\n        </label>\n        <label style={{ marginLeft: 20 }}>\n          <input\n            name=\"age45\"\n            type=\"checkbox\"\n            checked={state.age45}\n            onChange={onInputChange}\n          />\n          Age 45\n        </label>\n        <br />\n        <br />\n        <span>\n          Your entered pincodes:{\" \"}\n          {state.pincodeToFilter.length\n            ? state.pincodeToFilter.join(\", \")\n            : \"nothing\"}\n        </span>\n        <br />\n        <span>\n          (Note: only valid pincodes are considered. If no pincodes are entered\n          then it will show results of all pincodes.)\n        </span>\n      </p>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nexport const DateField = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const onDateChange = (e) => {\n    setState({ startDate: e.target.value });\n  };\n\n  return (\n    <input\n      type=\"text\"\n      id=\"date\"\n      name=\"date\"\n      value={state.startDate}\n      onChange={onDateChange}\n      style={{ width: 80 }}\n    />\n  );\n};\n","import React from \"react\";\nimport { VaccineDataContext } from \"./VaccineDataContext\";\n\nconst SlotsUi = ({ slots }) => {\n  return (\n    <ul>\n      {slots &&\n        slots.map &&\n        slots.map((session, i) => {\n          return (\n            <li key={i}>\n              <span style={{ color: \"#0000ff\" }}>\n                {session.date} {session.name}, {session.block_name},{\" \"}\n                {session.district_name}, {session.pincode},{\" \"}\n              </span>\n              <span>{session.vaccine}</span> -{\" \"}\n              <span style={{ color: \"#ff0080\" }}>\n                {session.available_capacity} slots\n              </span>{\" \"}\n              <span style={{ color: \"#00cc00\" }}>\n                (Age limit {session.min_age_limit})\n              </span>\n            </li>\n          );\n        })}\n    </ul>\n  );\n};\n\nexport const VaccineSlots = () => {\n  const { state, setState } = React.useContext(VaccineDataContext);\n\n  const {\n    slots,\n    startMonitoring,\n    isFetching,\n    countdown,\n    lastChecked,\n    isError,\n    groupedSlots: { others, pincode },\n  } = state;\n\n  const onStartMonitoring = () => {\n    setState({ startMonitoring: !startMonitoring });\n  };\n\n  return (\n    <div>\n      <button type=\"button\" onClick={onStartMonitoring}>\n        <span>{startMonitoring ? \"Stop\" : \"Start Monitoring\"}</span>\n      </button>\n\n      {isFetching ? (\n        <p>'Checking slots...'</p>\n      ) : startMonitoring ? (\n        <p>\n          {lastChecked && (\n            <span>\n              Last checked at {lastChecked} <br />\n            </span>\n          )}\n          Checking again in: {countdown} seconds\n        </p>\n      ) : (\n        <p></p>\n      )}\n\n      {!isError ? (\n        <>\n          {pincode && pincode.length > 0 && (\n            <>\n              <h2>Matching pincodes</h2>\n              <SlotsUi slots={pincode} />\n            </>\n          )}\n          {others && others.length > 0 && (\n            <>\n              <h2>Not matching pincodes</h2>\n              <SlotsUi slots={others} />\n            </>\n          )}\n        </>\n      ) : (\n        <p>\n          {isError ? (\n            <b style={{ color: \"#ff0000\" }}>Error fetching slots retrying...</b>\n          ) : (\n            <b style={{ color: \"#ff0080\" }}>No open slots are available.</b>\n          )}\n        </p>\n      )}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Beep } from \"./Beep\";\nimport { CityDropdown } from \"./CityDropdown\";\nimport { DateField } from \"./DateField\";\nimport \"./styles.css\";\nimport { VaccineProvider } from \"./VaccineDataContext\";\nimport { VaccineSlots } from \"./VaccineSlots\";\n\nexport default function App() {\n  return (\n    <VaccineProvider>\n      <div>\n        <p>\n          Inspired by{\" \"}\n          <a target=\"_blank\" href=\"https://pranavmehta.github.io/1844vaccine/\">\n            https://pranavmehta.github.io/1844vaccine/\n          </a>\n          <br />\n          <sub>This is re-written in reactjs just for fun ♥️</sub>\n        </p>\n        <p style={{ maxWidth: 600 }}>\n          This bot periodically checks the Cowin portal for available\n          vaccination slots every 60 seconds and alerts with an audible beep if\n          an open slot is found.\n        </p>\n         <span>To use this bot,</span>\n        <ul>\n          <li>select one or more cities,</li>\n          <li>click \"Start monitoring\"</li>\n          <li>keep it running in a browser tab</li>\n        </ul>\n        <p>\n          Start date: <DateField /> (dd-mm-yyyy, checks for upto 7 days from\n          this date)\n        </p>\n        <CityDropdown />\n        <Beep />\n        <VaccineSlots />\n      </div>\n    </VaccineProvider>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}